autoscaling:
  enabled: true
  minReplicas: 1
  maxReplicas: 2
  targetCPUUtilizationPercentage: 50

gitRepo: https://github.com/mauberti-bc/conservation-prioritization.git
gitRef: main
imageRegisry: image-registry.apps.gold.devops.gov.bc.ca/fa9440-tools

services:
  frontend:
    replicas: 1
    image:
      stream: frontend
      tag: dev
      pullPolicy: "Always"
    resources:
      limits:
        cpu: 500m
        memory: 512Mi
      requests:
        cpu: 250m
        memory: 256Mi
    service:
      type: ClusterIP
      port: 80
      targetPort: 80
    route:
      enabled: true
      host: conservation123.nrs.gov.bc.ca

  workflows:
    server:
      replicas: 1
      image:
        stream: prefect-server
        tag: dev
        pullPolicy: IfNotPresent
      resources:
        limits:
          cpu: 500m
          memory: 512Mi
        requests:
          cpu: 250m
          memory: 256Mi
      service:
        type: ClusterIP
        port: 80
        targetPort: 8080
      route:
        host: workflows123.nrs.gov.bc.ca
    worker:
      replicas: 1
      pool: pool
      image:
        stream: prefect-worker
        tag: dev
        pullPolicy: IfNotPresent
      resources:
        limits:
          cpu: 500m
          memory: 512Mi
        requests:
          cpu: 250m
          memory: 256Mi
      service:
        type: ClusterIP
        port: 80
        targetPort: 8081
    deploy:
      replicas: 1
      image:
        stream: prefect-deploy
        tag: dev
        pullPolicy: IfNotPresent
      resources:
        limits:
          cpu: 500m
          memory: 512Mi
        requests:
          cpu: 250m
          memory: 256Mi
      service:
        type: ClusterIP
        port: 80
        targetPort: 8081